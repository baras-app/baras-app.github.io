---
phase: 01-foundation
plan: 03
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - astro.config.mjs
  - src/styles/custom.css
  - src/content/docs/index.mdx
autonomous: false

must_haves:
  truths:
    - "Site uses dark charcoal background with teal/cyan accents"
    - "Dark mode is the default theme"
    - "Dark mode toggle is visible in header and persists preference"
    - "Site is readable on mobile with hamburger menu"
    - "Search box finds content across documentation"
    - "Code blocks have copy-to-clipboard buttons"
  artifacts:
    - path: "astro.config.mjs"
      provides: "Starlight theme customization"
      contains: "customCss"
    - path: "src/styles/custom.css"
      provides: "Custom color scheme and styling"
      contains: "dark"
  key_links:
    - from: "astro.config.mjs"
      to: "src/styles/custom.css"
      via: "customCss import"
      pattern: "customCss.*custom.css"
---

<objective>
Configure Starlight theme with BARAS brand colors and verify all UX features work correctly.

Purpose: Match the site's visual identity to BARAS app aesthetic and ensure all core UX requirements (dark mode, mobile, search, copy buttons) are functional.
Output: Themed documentation site that feels like it belongs to the BARAS app family.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-CONTEXT.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure Starlight theme and custom colors</name>
  <files>
    astro.config.mjs
    src/styles/custom.css
  </files>
  <action>
    Apply BARAS brand colors from CONTEXT.md:
    - Dark charcoal background
    - Teal/cyan primary accent
    - Gold/tan for branding elements

    1. Create src/styles/custom.css with CSS custom properties:
       ```css
       /* BARAS brand colors */
       :root {
         /* Teal/cyan accent */
         --sl-color-accent-low: #083344;
         --sl-color-accent: #0891b2;
         --sl-color-accent-high: #22d3ee;

         /* Gold/tan for branding highlights */
         --sl-color-white: #fafaf9;
         --sl-color-gray-1: #e7e5e4;
         --sl-color-gray-2: #d6d3d1;
         --sl-color-gray-3: #a8a29e;
         --sl-color-gray-4: #78716c;
         --sl-color-gray-5: #57534e;
         --sl-color-gray-6: #292524;

         /* Dark charcoal background */
         --sl-color-black: #1c1917;
       }

       /* Dark mode as default - invert for light mode */
       :root[data-theme='light'] {
         --sl-color-accent-low: #cffafe;
         --sl-color-accent: #0891b2;
         --sl-color-accent-high: #083344;
       }
       ```

    2. Update astro.config.mjs to:
       - Import custom CSS: `customCss: ['./src/styles/custom.css']`
       - Set default color mode if Starlight supports it (check docs)

    3. Starlight provides these UX features by default - verify they're enabled:
       - Dark mode toggle: Built-in, appears in header
       - Mobile responsive: Built-in hamburger menu
       - Search (Pagefind): Built-in, enabled by default
       - Copy buttons on code blocks: Built-in

    4. If any UX feature is disabled by default, enable it in astro.config.mjs

    5. Add a code block to index.mdx to test copy button:
       ```mdx
       ## Quick Example

       ```toml
       # Example BARAS config
       [overlay]
       enabled = true
       ```
       ```
  </action>
  <verify>
    npm run dev shows site with dark charcoal background and teal accents
  </verify>
  <done>
    Custom BARAS color scheme applied, matches brand aesthetic from CONTEXT.md
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Themed Starlight site with BARAS brand colors and all UX features enabled
  </what-built>
  <how-to-verify>
    Run `npm run dev` and verify each UX requirement:

    1. **Dark mode default (UX-01)**:
       - Site loads in dark mode by default
       - Toggle in header switches to light mode
       - Refresh page - preference persists
       - Color scheme: dark charcoal background, teal/cyan accents

    2. **Mobile responsive (UX-02)**:
       - Resize browser to mobile width (< 768px)
       - Hamburger menu appears
       - Tap hamburger - sidebar slides in
       - Content is readable, no horizontal scroll

    3. **Search (UX-03)**:
       - Search box visible in header
       - Type "installation" - results appear
       - Click result - navigates to page

    4. **Copy buttons (UX-04)**:
       - Find a code block on the page
       - Hover over code block
       - Copy button appears
       - Click copy - code copied to clipboard

    Note: Search may not work in dev mode (Pagefind indexes at build time).
    Run `npm run build && npm run preview` to test search.
  </how-to-verify>
  <resume-signal>Type "approved" if all 4 UX features work, or describe issues</resume-signal>
</task>

</tasks>

<verification>
1. Site uses dark charcoal background (not Starlight default blue)
2. Teal/cyan accent colors visible on links and highlights
3. Dark mode toggle in header works and persists
4. Mobile hamburger menu works
5. Search finds content (test after build)
6. Code block copy buttons work
</verification>

<success_criteria>
- All UX requirements met: UX-01, UX-02, UX-03, UX-04
- Visual identity matches BARAS app aesthetic per CONTEXT.md
- Site feels professional and gaming-focused, not generic docs
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-03-SUMMARY.md`
</output>
